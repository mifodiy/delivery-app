"use strict";(self.webpackChunkeliftech=self.webpackChunkeliftech||[]).push([[666],{666:function(e,r,s){s.r(r),s.d(r,{default:function(){return y}});var t=s(1413),n=s(4165),a=s(5861),i=s(9439),c=s(2791),l=s(1134),o=s(4695),u=s(6727),d=s(9434),m=s(7993),f=s(3749),_=s(6752),p=s(184),h=function(e){var r=e.directionResponse,s=(0,d.v9)((function(e){return e.shops})).activeCoordinates;return(0,p.jsxs)(m.b6,{center:s,zoom:15,mapContainerStyle:{width:"100%",height:"300px"},options:{zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:[(0,p.jsx)(m.Jx,{position:s}),r&&(0,p.jsx)(m.tH,{directions:r})]})},x=["places"],v=function(){var e,r,s,v,j=(0,c.useRef)(""),N=(0,c.useState)(null),b=(0,i.Z)(N,2),g=b[0],Z=b[1],y=(0,d.v9)((function(e){return e.cart})),C=y.totalPrice,S=y.items,k=(0,d.v9)((function(e){return e.shops})).activeAddress,q=(0,f.i)().request,w=(0,d.I0)(),A=u.Ry({firstName:u.Z_().required("Name is a required field"),email:u.Z_().email().required("Email is a required field"),phoneNumber:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").required("phone is a required field"),address:u.Z_().required("Address is a required field")}).required(),I=(0,l.cI)({resolver:(0,o.X)(A)}),P=I.register,E=I.handleSubmit,J=I.formState.errors,R=I.reset,T=I.setValue;if(!(0,m.Ji)({googleMapsApiKey:"AIzaSyBrEADnXG840-pxLbF3BZXyQhAJATtDEp8",libraries:x}).isLoaded)return(0,p.jsx)("h5",{children:"Map is not loading"});var D=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==j.current.value){e.next=2;break}return e.abrupt("return");case 2:return T("address",j.current.value,{shouldValidate:!0}),r=new google.maps.DirectionsService,e.next=6,r.route({origin:k,destination:j.current.value,travelMode:google.maps.TravelMode.DRIVING});case 6:s=e.sent,Z(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("form",{className:"cart-form",onSubmit:E((function(e){var r=(0,t.Z)((0,t.Z)({},e),{},{address:j.current.value,items:S});q("https://647478397de100807b1b010c.mockapi.io/orders","POST",JSON.stringify(r)).then(R()).then(w((0,_.LL)())).catch("Something went wrong")})),children:[(0,p.jsx)(h,{directionResponse:g}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Name:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},P("firstName")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(e=J.firstName)||void 0===e?void 0:e.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Email:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},P("email")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(r=J.email)||void 0===r?void 0:r.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Phone:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},P("phoneNumber")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(s=J.phoneNumber)||void 0===s?void 0:s.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Address:",(0,p.jsx)(m.F2,{onPlaceChanged:D,children:(0,p.jsx)("input",(0,t.Z)((0,t.Z)({className:"cart-form__input"},P("address")),{},{type:"text",ref:j}))})]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(v=J.address)||void 0===v?void 0:v.message}),(0,p.jsxs)("div",{className:"cart-form__box",children:[(0,p.jsxs)("span",{className:"cart-form__price",children:["Total price: ",C]}),(0,p.jsx)("button",{className:"cart-form__btn",type:"submit",children:"Submit"})]})]})},j=s(4925),N=function(e){var r=e.amount,s=e.dec,t=e.inc,n=(0,c.useState)(r),a=(0,i.Z)(n,2),l=a[0],o=a[1];return(0,p.jsxs)("div",{className:"count",children:[(0,p.jsx)("span",{className:"count__amount",children:l}),(0,p.jsxs)("div",{className:"count__buttons",children:[(0,p.jsx)("button",{className:"count__btn count__btn--plus",onClick:function(){l<99&&t(),o((function(e){return e+1}))}}),(0,p.jsx)("button",{className:"count__btn count__btn--minus",onClick:function(){l>1&&(s(),o((function(e){return e-1})))}})]})]})},b=function(e){var r=e.title,s=e.url,t=e.price,n=e.count,a=e.id,i=(0,d.I0)();return(0,p.jsxs)("li",{className:"cart-list__item",children:[(0,p.jsx)("img",{className:"cart-list__img",src:s,alt:r}),(0,p.jsxs)("div",{className:"cart-list__box",children:[(0,p.jsx)("h3",{className:"cart-list__title",children:r}),(0,p.jsxs)("span",{className:"cart-list__price",children:["Price: ",t,"$"]}),(0,p.jsx)(N,{amount:n,inc:function(){i((0,_.Jv)(a))},dec:function(){i((0,_.Yn)(a))}})]}),(0,p.jsx)("button",{className:"btn-close cart-list__btn",onClick:function(){i((0,_.cl)(a))}})]})},g=["id"],Z=function(){var e=(0,d.v9)((function(e){return e.cart})).items,r=e.length>0?e.map((function(e){var r=e.id,s=(0,j.Z)(e,g);return(0,p.jsx)(b,(0,t.Z)({id:r},s),r)})):(0,p.jsx)("h3",{children:"Cart is Empty"});return(0,p.jsx)("div",{className:"cart-list",children:(0,p.jsx)("ul",{className:"cart-list__items",children:r})})},y=function(){return(0,p.jsxs)("div",{className:"cart__wrapper",style:{display:"flex"},children:[(0,p.jsx)(Z,{}),(0,p.jsx)(v,{})]})}}}]);
//# sourceMappingURL=666.d6ef2b69.chunk.js.map