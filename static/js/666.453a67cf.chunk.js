"use strict";(self.webpackChunkeliftech=self.webpackChunkeliftech||[]).push([[666],{666:function(e,r,s){s.r(r),s.d(r,{default:function(){return C}});var t=s(1413),n=s(4165),a=s(5861),i=s(9439),c=s(2791),l=s(1134),o=s(4695),u=s(6727),m=s(9434),d=s(7993),f=s(3749),_=s(6752),p=s(184),h=function(e){var r=e.directionResponse,s=(0,m.v9)((function(e){return e.shops})).activeCoordinates;return(0,p.jsxs)(d.b6,{center:s,zoom:15,mapContainerStyle:{width:"100%",height:"300px"},options:{zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:[(0,p.jsx)(d.Jx,{position:s}),r&&(0,p.jsx)(d.tH,{directions:r})]})},x=["places"],j=function(){var e,r,s,j,N=(0,c.useRef)(""),v=(0,c.useState)(null),b=(0,i.Z)(v,2),g=b[0],Z=b[1],C=(0,m.v9)((function(e){return e.cart})),y=C.totalPrice,S=C.items,k=(0,m.v9)((function(e){return e.shops})).activeAddress,w=(0,f.i)().request,q=(0,m.I0)(),I=u.Ry({firstName:u.Z_().required("Name is a required field"),email:u.Z_().email().required("Email is a required field"),phoneNumber:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").required("phone is a required field")}).required(),P=(0,l.cI)({resolver:(0,o.X)(I)}),R=P.register,T=P.handleSubmit,A=P.formState.errors,D=P.reset;if(!(0,d.Ji)({googleMapsApiKey:"AIzaSyDxg6WbNrQbgIeNo542YkjVg_ltBY8DT8w",libraries:x}).isLoaded)return(0,p.jsx)("h5",{children:"Map is not loading"});var J=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==N.current.value){e.next=2;break}return e.abrupt("return");case 2:return r=new google.maps.DirectionsService,e.next=5,r.route({origin:k,destination:N.current.value,travelMode:google.maps.TravelMode.DRIVING});case 5:s=e.sent,Z(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("form",{className:"cart-form",onSubmit:T((function(e){var r=(0,t.Z)((0,t.Z)({},e),{},{address:N.current.value,items:S});w("https://647478397de100807b1b010c.mockapi.io/orders","POST",JSON.stringify(r)).then(D()).then(q((0,_.LL)())).catch("Something went wrong")})),children:[(0,p.jsx)(h,{directionResponse:g}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Name:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},R("firstName")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(e=A.firstName)||void 0===e?void 0:e.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Email:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},R("email")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(r=A.email)||void 0===r?void 0:r.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Phone:",(0,p.jsx)("input",(0,t.Z)({className:"cart-form__input"},R("phoneNumber")))]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(s=A.phoneNumber)||void 0===s?void 0:s.message}),(0,p.jsxs)("label",{className:"cart-form__label",children:["Address:",(0,p.jsx)(d.F2,{onPlaceChanged:J,children:(0,p.jsx)("input",(0,t.Z)((0,t.Z)({className:"cart-form__input"},R("address")),{},{type:"text",ref:N}))})]}),(0,p.jsx)("p",{className:"cart-form__error",children:null===(j=A.address)||void 0===j?void 0:j.message}),(0,p.jsxs)("div",{className:"cart-form__box",children:[(0,p.jsxs)("span",{className:"cart-form__price",children:["Total price: ",y]}),(0,p.jsx)("button",{className:"cart-form__btn",type:"submit",children:"Submit"})]})]})},N=s(4925),v=function(e){var r=e.amount,s=e.dec,t=e.inc,n=(0,c.useState)(r),a=(0,i.Z)(n,2),l=a[0],o=a[1];return(0,p.jsxs)("div",{className:"count",children:[(0,p.jsx)("span",{className:"count__amount",children:l}),(0,p.jsxs)("div",{className:"count__buttons",children:[(0,p.jsx)("button",{className:"count__btn count__btn--plus",onClick:function(){l<99&&t(),o((function(e){return e+1}))}}),(0,p.jsx)("button",{className:"count__btn count__btn--minus",onClick:function(){l>1&&(s(),o((function(e){return e-1})))}})]})]})},b=function(e){var r=e.title,s=e.url,t=e.price,n=e.count,a=e.id,i=(0,m.I0)();return(0,p.jsxs)("li",{className:"cart-list__item",children:[(0,p.jsx)("img",{className:"cart-list__img",src:s,alt:r}),(0,p.jsxs)("div",{className:"cart-list__box",children:[(0,p.jsx)("h3",{className:"cart-list__title",children:r}),(0,p.jsxs)("span",{className:"cart-list__price",children:["Price: ",t,"$"]}),(0,p.jsx)(v,{amount:n,inc:function(){i((0,_.Jv)(a))},dec:function(){i((0,_.Yn)(a))}})]}),(0,p.jsx)("button",{className:"btn-close cart-list__btn",onClick:function(){i((0,_.cl)(a))}})]})},g=["id"],Z=function(){var e=(0,m.v9)((function(e){return e.cart})).items,r=e.length>0?e.map((function(e){var r=e.id,s=(0,N.Z)(e,g);return(0,p.jsx)(b,(0,t.Z)({id:r},s),r)})):(0,p.jsx)("h3",{children:"Cart is Empty"});return(0,p.jsx)("div",{className:"cart-list",children:(0,p.jsx)("ul",{className:"cart-list__items",children:r})})},C=function(){return(0,p.jsxs)("div",{className:"cart__wrapper",style:{display:"flex"},children:[(0,p.jsx)(Z,{}),(0,p.jsx)(j,{})]})}}}]);
//# sourceMappingURL=666.453a67cf.chunk.js.map